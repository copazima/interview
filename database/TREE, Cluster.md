# 트리기반 인덱스/클러스터형 인덱스  

## 트리기반 인덱스  
![TREE](https://github.com/copazima/interview/blob/main/resource/B-TREE%20INDEX.png?raw=true)  
데이터베이스에서 가장 일반적인 인덱스는 B-TREE 인덱스이다.  
가장 상위에 있는 블럭을 루트 블럭이라 한다.  
B-TREE 인덱스는 브랜치 블럭과 리프 블럭으로 구성된다.  
브랜치 블럭은 분기를 목적으로 하는 블럭이며 다음 단계의 블럭을 가리키는 포인터를 가지고 있다.  
리프 블럭은 트리의 가장 아래 단계에 존재한다. 리프 블럭은 인덱스를 구성하는 컬럼의 데이터와 해당 데이터를 가지고 있는 행의 위치를 가르키는 레코드 식별자로 구성 되어 있다.  
인덱스 데이터는 인덱스를 구성하는 컬럼의 값으로 정렬된다. 만약 인덱스 데이터 값이 동일하면 레코드 식별자의 순서로 저장된다.

## 클러스터형 인덱스  
![Cluster](https://github.com/copazima/interview/blob/main/resource/%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0%ED%98%95.png?raw=true)  
인덱스의 리프 페이지가 곧 데이터 페이지이다. 따라서, 테이블 탐색에 필요한 레코드 식별자가 리프 페이지에 없다. 클러스터형 인덱스의 리프 페이지를 탐색하면 해당 테이블의 모든 칼럼 값을 곧바로 얻을 수 있다. 
 클러스터형 인덱스를 사전에 비유한다.(색인과는 다름)  
 
리프 페이지의 모든 로우(데이터)는 인덱스 키 컬럼 순으로 물리적으로 정렬되어 저장 된다. 테이블 로우는 물리적으로 한 가지 순서로만 정렬될 수 있다. 그러므로 클러스터형 인덱스는 테이블 당 한 개만 생성할 수 있다. 전화번호부 한 권을 상호와 인명으로 동시에 정렬할 수 없는 것과 같다.


> 참고자료:  
[https://mozi.tistory.com/221]  
인덱스 기본: [http://wiki.gurubee.net/pages/viewpage.action?pageId=27428159]  

작성자: 다정  
작성일: 21.3.21