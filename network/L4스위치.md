# L4 스위치  
## 스위치란?  
- 허브의 확장된 개념으로 기본 기능은 허브와 동일하지만 전송 중 패킷의 충돌이 일어나지 않도록 패킷의 목적지로 지정할 포트를 직접 전송
- 스위치에서 패킷의 목적지 주소를 기준으로 보내는 곳과 받는 곳을 계산하여 해당 포트로 1대1로 연결한다 (Switching)
- 스위칭은 정보 전달의 수단과 회선의 효율적 운용을 위해 입/출력 상태를 감시하며 전송로의 장애 발생 시 현재 상태에서 예비 상태로 전환한다
<br>
<br>

## 로드밸런싱(load balancing):서버 부하 분산  
 컴퓨터 네트워크 기술의 일종으로 둘 혹은 셋 이상의 중앙처리장치 혹은 저장장치와 같은 컴퓨터 자원들에게 작업을 나누는 것을 의미한다.  
 부하분산을 위한 대부분의 응용 프로그램은 다수의 서버를 가지고 한 가지 종류의 인터넷 서비스를 지원하는 방식이다.   
  보통 부하 분산은 트래픽이 많은 웹사이트, IRC 네트워크, FTP 사이트, NNTP 서버, DNS서버에 적용이 되고 있다.  

---
## 로드밸런서 동작(L4)  
![로드 밸런싱 아키텍처](https://miro.medium.com/max/875/1*eCJk5cWVw2mfefvx7LkGTA.png)
[상세내용 참고:https://pakss328.medium.com/%EB%A1%9C%EB%93%9C%EB%B0%B8%EB%9F%B0%EC%84%9C%EB%9E%80-l4-l7-501fd904cf05]
<br>
<br>  

## L4스위치의 핵심 역할
![L4스위치의 핵심 역할](https://blog.kakaocdn.net/dn/dayA41/btqEvgY0sOT/S7gQZq1g2Iaj82PTdSiva0/img.png)  

 L4 스위치는 로드밸런싱(서버 부하 분산)을 처리하는 장비. 외부에서 들어오는 모든 요청은 서버가 아닌 L4 스위치를 거쳐야 하며 모든 요청을 받은 L4 스위치가 서버들에게 적절히 나누어준다.  
L4 스위치는 부하 분산뿐만 아니라 TCP,UDP,HTTP와 같은 프로토콜들의 헤더를 분석해서 그 정보를 바탕으로 부하 분산을 실시하고 거기에 Source IP, Destination IP를 NAT(Network Address Traslation)해서 보낼 수 있다.  

---

## L4 스위치 주요 기능  
1. 서버 로드밸런싱 기능: 여러 대의 서버를 하나의 서버처럼 동작하게 함.  
  인터넷 서버의 성능 및 안정성 향상 가능  
2. 캐시 리다이렉션 기능: 캐싱 서버를 좀 더 효율적으로 사용할 수 있게 하는 것.  
 캐시는 인터넷의 서버와 클라이언트 단에서도 속도 향상과 WAN 구간의 트래픽 감소를 위해 서버의 데이터를 일시적으로 저장한다.  
3. 방화벽/VPN 로드 밸런싱 기능: 방화벽이나 VPN 게이트웨이 장비의 성능 향상과 안정성 향상을 위한 기능  

## L4 스위치를 사용하는 이유  
1. Load Balancing  
하나의 공인 IP로 여러 개의 사설 IP 사용 가능  
여러 개의 사설 IP로 트래픽을 나누어 부하를 줄여 줌  

2. 무결성  
*VIP를 이중화시킴으로써 VIP장비의 실패에도 내성을 갖게 한다. 

*VIP: Virtual IP약자. 서버 그룹의 대표 IP  

>참고할만한 블로그  
[https://ckddn9496.tistory.com/31]  
L4스위치 쉽게 이해하기 시리즈[https://aws-hyoh.tistory.com/entry/L4-Switch-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0]
작성자: 다정  
작성일: 20201217
